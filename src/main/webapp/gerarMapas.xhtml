<ui:composition template="layout.xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:fox="http://java.sun.com/jsf/composite/fox">

    <ui:define name="title">
        Picks and Bans
    </ui:define>

    <ui:define name="content">

        <h:form id="formVisualizarPartida"
                >

            <p:growl id="messages"
                     showDetail="false"/>

            <div class="row" style="display: flex; flex-wrap: wrap">
                <div class="column4" style="display: flex; flex-direction: column; justify-content: center; align-items: center; overflow-y: scroll">
                    <h1 style="text-align: center">REMAINING MAPS</h1>
                    <ui:repeat value="#{managerPartida.mapas}" var="mapa">
                        <div class="row">
                            <p:outputLabel id="nomeMapa" style="text-align: center !important" value="#{mapa.nome}"/>
                        </div>
                        <div class="row" style="display: flex; justify-content: center; align-items: center">
                            <h:graphicImage value="image/#{mapa.avatar}" width="200px" height="100px" />
                        </div>
                    </ui:repeat>
                </div>
                <div class="column4" style="height: 60vh; overflow-x: scroll">
                    <h1 style="text-align: center">VOTES</h1>
                    <ui:repeat value="#{managerPartida.pickBanVo}" var="pb">
                        <div class="row">
                            <div class="card" style="#{pb.tipoPickBan.nome eq 'BAN' ? 'background-color: #ff1168; padding: 0.8em': 'background-color: #a2e5d2; padding: 0.8em'}">
                                <div class="card-body">
                                    <h5 class="card-title">#{pb.team.nome}</h5>
                                    <h3 class="card-text">#{pb.tipoPickBan.nome}</h3>
                                    <p:commandButton value="Selecionar Mapa" actionListener="#{managerPartida.gerarMapas()}" process="@this"/>
                                </div>
                            </div>                        
                        </div>
                    </ui:repeat>

                </div>

                <div class="column4" style="display: flex; flex-direction: column; justify-content: center; align-items: center; overflow-y: scroll">
                    <h1 style="text-align: center">PICKED MAPS</h1>
                    <ui:repeat value="#{managerPartida.pickedMaps}" var="mapa">
                        <div class="row" style="display: flex; justify-content: center; align-items: center; text-align: center">                            

                            <p:outputLabel id="nomeMapa"
                                           style="text-align: center !important"
                                           value="#{mapa.nome}"/>
                        </div>

                        <div class="row" style="display: flex; justify-content: center; align-items: center">                           
                            <h:graphicImage value="image/#{mapa.avatar}" width="200px" height="100px" />
                        </div>
                    </ui:repeat>
                </div>
            </div>

            <p:dialog id="gerarMapasDialog"
                      widgetVar="gerarMapasDialog"
                      header="Atenção!"
                      modal="true"                      
                      draggable="false"
                      closeOnEscape="true"
                      showEffect="fade"
                      hideEffect="fade">


                <div class="row" style="display: flex; flex-wrap: wrap">
                    <div class="column4" style="display: flex; flex-direction: column; justify-content: center; align-items: center; overflow-y: scroll">
                        <h1 style="text-align: center">REMAINING MAPS</h1>
                        <ui:repeat value="#{managerPartida.mapas}" var="mapa">
                            <div class="row">
                                <p:outputLabel id="nomeMapa" style="text-align: center !important" value="#{mapa.nome}"/>
                            </div>
                            <div class="row" style="display: flex; justify-content: center; align-items: center">
                                <h:graphicImage value="image/#{mapa.avatar}" width="200px" height="100px" />
                            </div>
                        </ui:repeat>
                    </div>
                </div>


                <center>

                    <p:commandButton value="Não"
                                     title="Cancelar Remoção"
                                     icon="fa fa-ban"
                                     oncomplete="PF('gerarMapasDialog').hide();"
                                     styleClass="btn btn-default"/>

                    <p:commandButton value="Sim"
                                     title="Confirmar Remoção"
                                     icon="fa fa-check"
                                     process="@this"
                                     update="@form"
                                     actionListener="#{managerPartida.gerarMapas()}"
                                     styleClass="btn btn-info"/>

                </center>

            </p:dialog>



        </h:form>

    </ui:define>

</ui:composition>